<template name='adminAbsenceIndex'>
<div class="row">
	<div class="col-lg-12">
		<a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Menu</a>
		<h3>
		List of Absences&nbsp;&nbsp;
		<a href="{{pathFor 'adminAbsenceIndex' status='all'}}" class='btn btn-primary'>Show All</a>
		<a href="{{pathFor 'adminAbsenceIndex' status='pending'}}" class='btn btn-warning'>Show Pending</a>
		<a href="{{pathFor 'adminAbsenceIndex' status='approved'}}" class='btn btn-success'>Show Approved</a>
		<a href="{{pathFor 'adminAbsenceIndex' status='rejected'}}" class='btn btn-danger'>Show Rejected</a>
		</h3>
		{{> absenceTable absences}}
	</div>
</div>
</template>

<template name='absenceTable'>

<table class='table table-bordered'>
	<thead>
	<tr>
	<th>Type</th>
	<th>Start Date</th>
	<th>End Date</th>
	<th>Reason</th>
	<th>Submitted At</th>
	<th>Status</th>
	<th colspan="2">Actions</th>
	</tr>
	</thead>
	<tbody>
	{{#each this}}
		<tr>
		<td>{{type}}</td>
		<td>{{formatDate startDate}}</td>
		<td>{{formatDate endDate}}</td>
		<td>{{reason}}</td>
		<td>{{formatDatetime submittedAt}}</td>
		<td class='text-center'><span class="label label-{{statusLabel status}}">{{status}}</span></td>
		{{#if pending status}}
			<td class='text-center'><a href='#' class='btn btn-success absence_approve' data-id='{{_id}}'>Approve</a></td>
			<td class='text-center'><a href='#' class='btn btn-danger absence_reject' data-id='{{_id}}'>Reject</a></td>
		{{else}}
			<td class='text-center'><a href='#' class='btn btn-success absence_approve' disabled data-id='{{_id}}'>Approve</a></td>
			<td class='text-center'><a href='#' class='btn btn-danger absence_reject' disabled data-id='{{_id}}'>Reject</a></td>
		{{/if}}
		</tr>
	{{/each}}
	</tbody>
</table>

</template>
